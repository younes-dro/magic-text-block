(()=>{"use strict";var e,t={874:()=>{const e=window.wp.blocks,t=window.wp.i18n,o=window.wp.blockEditor,r=window.ReactJSXRuntime,a=JSON.parse('{"UU":"dro-block/magic-text-block"}'),i=window.wp.element,n=window.wp.richText,l=window.wp.components,s=({onClose:e,onChange:t,gradientDeg:o,setGradientDeg:a,gradientStartColor:i,setGradientStartColor:n,gradientEndColor:s,setGradientEndColor:c,popoverAnchor:d,LABEL_GRADIENT_DEG:g,LABEL_APPLY_BUTTON:m,LABEL_POPOVER_TITLE:u})=>(0,r.jsxs)(l.Popover,{animate:!0,position:"bottom right",offset:{x:10,y:10},onClose:e,anchor:d,children:[(0,r.jsx)("h4",{children:u}),(0,r.jsx)(l.ColorPicker,{color:i,onChange:e=>n(e)}),(0,r.jsx)(l.ColorPicker,{color:s,onChange:e=>c(e)}),(0,r.jsx)(l.TextControl,{label:g,value:o,onChange:e=>a(e)}),(0,r.jsx)(l.Button,{variant:"primary",onClick:()=>{t(),e()},children:m})]});(0,n.registerFormatType)("dro-magic-text/gradient",{title:"Gradient",tagName:"span",className:null,attributes:{style:"style"},edit:({isActive:e,onChange:a,value:l,textDomain:c="magic-text"})=>{const[d,g]=(0,i.useState)(!1),[m,u]=(0,i.useState)(null),[p,h]=(0,i.useState)("#fff"),[x,_]=(0,i.useState)("#000"),[v,k]=(0,i.useState)("90deg"),b=(0,t.__)("Gradient direction",c)||"Gradient direction",C=(0,t.__)("Apply",c)||"Apply",f=(0,t.__)("Select Gradient colors and deg",c)||"Select Gradient colors and deg",y=(0,i.useMemo)((()=>`linear-gradient(${v}, ${p}, ${x})`),[v,p,x]),T=(0,i.useCallback)((()=>{a((0,n.toggleFormat)(l,{type:"dro-magic-text/gradient",attributes:{style:`background: ${y}; -webkit-background-clip: text; -webkit-text-fill-color: transparent;`,class:"magic-text-gradient"}}))}),[y,a,l]),S=(0,i.useCallback)((()=>{e?a((0,n.toggleFormat)(l,{type:"dro-magic-text/gradient"})):g(!0)}),[e,a,l]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:u,children:(0,r.jsx)(o.RichTextToolbarButton,{icon:"editor-code",title:"Gradient Text Color",onClick:S,isActive:e})}),!e&&d&&(0,r.jsx)(s,{onClose:()=>g(!1),onChange:T,gradientDeg:v,setGradientDeg:k,gradientStartColor:p,setGradientStartColor:h,gradientEndColor:x,setGradientEndColor:_,popoverAnchor:m,LABEL_GRADIENT_DEG:b,LABEL_APPLY_BUTTON:C,LABEL_POPOVER_TITLE:f})]})}});const c=({onClose:e,onChange:t,popoverAnchor:o,borderColor:a,setBorderColor:i,LABEL_APPLY_UNDERLINE:n,LABEL_POPOVER_TITLE:s})=>(0,r.jsxs)(l.Popover,{anchor:o,children:[(0,r.jsx)("h4",{children:s}),(0,r.jsx)(l.ColorPicker,{color:a,onChange:e=>i(e)}),(0,r.jsx)(l.Button,{variant:"primary",onClick:()=>{t(),e()},children:n})]});(0,n.registerFormatType)("dro-magic-text/underline-effect",{title:(0,t.__)("Underline Effect","dro-magic-text"),tagName:"i",className:null,attributes:{style:"style",class:"class"},edit:({isActive:e,onChange:a,value:l,textDomain:s="dro-magic-text"})=>{const[d,g]=(0,i.useState)(!1),[m,u]=(0,i.useState)(),[p,h]=(0,i.useState)("hsl(130 80% 50%)"),x=(0,t.__)("Apply",s)||"Apply",_=(0,t.__)("Customize Underline",s)||"Customize Underline",v=(0,i.useCallback)((()=>{a((0,n.toggleFormat)(l,{type:"dro-magic-text/underline-effect",attributes:{style:`--underline-border-color: ${p};`,class:"dro-magic-text-underline-clip-effect"}}))}),[p,a,l]),k=(0,i.useCallback)((()=>{e?a((0,n.toggleFormat)(l,{type:"dro-magic-text/underline-effect"})):g(!0)}),[e,a,l]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:u,children:(0,r.jsx)(o.RichTextToolbarButton,{icon:"editor-underline",title:(0,t.__)("Underline Effect","dro-magic-text"),onClick:k,isActive:e})}),!e&&d&&(0,r.jsx)(c,{onClose:()=>g(!1),onChange:v,popoverAnchor:m,borderColor:p,setBorderColor:h,LABEL_APPLY_UNDERLINE:x,LABEL_POPOVER_TITLE:_})]})}});const d="dro-magic-text",g=(0,t.__)("Custmze the Text background image",d)||"Text Bg ImagCustmze the Text background image",m=(0,t.__)("Text bg image",d)||"Text Bg Image",u=(0,t.__)("Apply",d)||"Apply",p=({onClose:e,onChange:a,setImageUrl:i,popoverAnchor:n,fontSize:s,setFontSize:c})=>{const m=(0,t.__)("Open Media Library",d)||"Open Media Library",p=[{name:(0,t.__)("Small"),slug:"small",size:12},{name:(0,t.__)("Big"),slug:"big",size:26}];return(0,r.jsx)(l.Popover,{anchor:n,className:"dro-magic-text-bg-popover",children:(0,r.jsxs)("div",{style:{minWidth:"320px",padding:"16px"},children:[(0,r.jsx)("h4",{style:{marginBottom:"12px"},children:g}),(0,r.jsx)(o.MediaUploadCheck,{children:(0,r.jsx)(o.MediaUpload,{allowedTypes:["image"],onSelect:e=>i(e.url),render:({open:e})=>(0,r.jsx)(l.Button,{variant:"primary",onClick:e,style:{marginBottom:"12px",width:"100%"},children:m})})}),(0,r.jsx)(l.FontSizePicker,{__next40pxDefaultSize:!0,fallbackFontSize:16,fontSizes:p,value:s,onChange:e=>c(e)}),(0,r.jsx)(l.Button,{variant:"primary",onClick:()=>{a(),e()},style:{width:"100%"},children:u})]})})};(0,n.registerFormatType)("dro-magic-text/text-bg-image",{title:(0,t.__)("Text bg","dro-magic-text"),className:null,tagName:"mark",attributes:{style:"style"},edit:({value:e,onChange:t,isActive:a})=>{const[l,s]=(0,i.useState)(!1),[c,d]=(0,i.useState)(),[g,u]=(0,i.useState)(""),[h,x]=(0,i.useState)("20"),_=(0,i.useCallback)((()=>{t((0,n.toggleFormat)(e,{type:"dro-magic-text/text-bg-image",attributes:{style:`--text-bg-image: url('${g}'); --text-size: ${h}`,class:"dro-magic-text-bg-image"}}))}),[t,e,g,h]),v=(0,i.useCallback)((()=>{a?t((0,n.toggleFormat)(e,{type:"dro-magic-text/text-bg-image"})):s(!0)}),[a,t,e]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:d,children:(0,r.jsx)(o.RichTextToolbarButton,{icon:"format-image",title:m,onClick:v,isActive:a})}),!a&&l&&(0,r.jsx)(p,{onClose:()=>s(!1),onChange:_,setImageUrl:u,popoverAnchor:c,fontSize:h,setFontSize:x})]})}});const h=({onClose:e,onChange:t,gradient:o,setGradient:a,strokeWidth:i,setStrokeWidth:n,popoverAnchor:s,LABEL_POPOVER_TITLE:c,LABEL_GRADIENT_STROKE:d,LABEL_GRADIENT_WIDTH:g,LABEL_APPLY_BUTTON:m})=>(0,r.jsxs)(l.Popover,{anchor:s,className:"gradient-stroke-popover",children:[(0,r.jsx)("h4",{children:c}),(0,r.jsx)(l.GradientPicker,{value:o,onChange:a,label:d}),(0,r.jsx)(l.RangeControl,{label:g,value:i,onChange:n,min:.1,max:5,step:.1,initialPosition:1}),(0,r.jsx)(l.Button,{variant:"primary",onClick:t,children:m})]});(0,n.registerFormatType)("dro-magic-text/gradient-stroke",{title:(0,t.__)("Gradient Stroke","dro-magic-text"),tagName:"bdo",className:null,attributes:{style:"style",class:"class"},edit:({isActive:e,value:a,onChange:l,textDomain:s="dro-magic-text"})=>{const[c,d]=(0,i.useState)(!1),[g,m]=(0,i.useState)(),[u,p]=(0,i.useState)("linear-gradient(to right, #09f1b8, #00a2ff, #ff00d2, #fed90f)"),[x,_]=(0,i.useState)(1),v=(0,t.__)("Gradient Stroke Settings",s)||"Gradient Stroke Settings",k=(0,t.__)("Stroke Gradient",s)||"Stroke Gradient",b=(0,t.__)("Stroke Width",s)||"Stroke Width",C=(0,t.__)("Apply",s)||"Apply",f=(0,i.useCallback)((()=>{l((0,n.toggleFormat)(a,{type:"dro-magic-text/gradient-stroke",attributes:{style:`\n            --gradient-stroke: ${u};\n            --stroke-width: ${x}px;\n          `,class:"magic-gradient-stroke"}}))}),[u,x,l,a]),y=(0,i.useCallback)((()=>{e?l((0,n.toggleFormat)(a,{type:"dro-magic-text/gradient-stroke"})):d(!0)}),[e,a,l]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:m,children:(0,r.jsx)(o.RichTextToolbarButton,{icon:"admin-appearance",title:(0,t.__)("Gradient Stroke",s)||"Gradient Stroke",onClick:y,isActive:e})}),c&&(0,r.jsx)(h,{onClose:()=>d(!1),onChange:()=>{f(),d(!1)},gradient:u,setGradient:p,strokeWidth:x,setStrokeWidth:_,popoverAnchor:g,LABEL_POPOVER_TITLE:v,LABEL_GRADIENT_STROKE:k,LABEL_GRADIENT_WIDTH:b,LABEL_APPLY_BUTTON:C})]})}});const x=[{name:"Default",value:"default"},{name:"Dark",value:"dark"},{name:"Light",value:"light"},{name:"Milkshake",value:"milkshake"},{name:"Popsicle",value:"popsicle"}],_=window.wp.data,v=window.wp.editor,k=window.wp.plugins,b="dro-magic-text",C=(0,t.__)("Display Mode",b);(0,k.registerPlugin)("dro-magic-text-post-theme-selector",{render:()=>{const{savedTheme:e}=(0,_.useSelect)((e=>({savedTheme:e("core/editor").getEditedPostAttribute("meta")?.dro_magic_text_theme_meta}))),[o,a]=(0,i.useState)((()=>void 0!==e&&"default"!==e)),{editPost:n}=(0,_.useDispatch)("core/editor");return(0,i.useEffect)((()=>{const t=()=>{const t=document.querySelector(".block-editor-iframe__scale-container"),r=t?.querySelector("iframe"),a=r?.contentDocument?.body,i=[a,document.querySelector(".editor-styles-wrapper")].filter(Boolean);i.forEach((e=>{console.debug("1",e),e.classList.remove(...x.map((e=>`magic-theme-${e.value}`))),e.classList.remove(...x.map((e=>`theme-${e.value}`)))})),o&&e&&"default"!==e&&i.forEach((t=>{console.debug("2",t),t.classList.add(`magic-theme-${e}`),t.classList.add(`theme-${e}`)}))};setTimeout((()=>t()),100);const r=new MutationObserver((e=>{e.forEach((()=>{const e=document.querySelector(".block-editor-iframe__scale-container");if(e){const o=e.querySelector("iframe");o&&o.contentDocument&&t()}}))})),a=document.querySelector(".block-editor-iframe__scale-container")?.parentNode;return a&&r.observe(a,{childList:!0,subtree:!0}),()=>{r.disconnect()}}),[e,o]),(0,r.jsx)(v.PluginDocumentSettingPanel,{name:"magic-text-display-mode",title:C,className:"dro-magic-text-post-theme-selector-panel",initialOpen:!0,children:(0,r.jsxs)("div",{className:"dro-magic-text-post-theme-selector-panel__content",children:[(0,r.jsx)(l.ToggleControl,{label:(0,t.__)("Enable Theme Selector",b),checked:o,onChange:t=>{a(t),n({meta:{dro_magic_text_theme_meta:t?e||x[0].value:"default"}})}}),(o||e)&&(0,r.jsxs)("div",{className:"theme-selector-wrapper",children:[(0,r.jsx)("label",{htmlFor:"magic-text-display-mode",children:(0,t.__)("Display Mode",b)}),(0,r.jsx)("select",{id:"magic-text-display-mode",value:e||"default",onChange:e=>{n({meta:{dro_magic_text_theme_meta:e.target.value}})},children:x.map((e=>(0,r.jsx)("option",{value:e.value,children:(0,t.__)(e.name,b)},e.value)))})]})]})})},icon:"star-half"}),(0,e.registerBlockType)(a.UU,{edit:function(){return(0,r.jsx)("p",{...(0,o.useBlockProps)(),children:(0,t.__)("Magic Text Block â€“ hello from the editor!","dro-magic-text")})},save:function(){return(0,r.jsx)("p",{...o.useBlockProps.save(),children:"Magic Text Block â€“ hello from the saved content!"})}})}},o={};function r(e){var a=o[e];if(void 0!==a)return a.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,r),i.exports}r.m=t,e=[],r.O=(t,o,a,i)=>{if(!o){var n=1/0;for(d=0;d<e.length;d++){for(var[o,a,i]=e[d],l=!0,s=0;s<o.length;s++)(!1&i||n>=i)&&Object.keys(r.O).every((e=>r.O[e](o[s])))?o.splice(s--,1):(l=!1,i<n&&(n=i));if(l){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,a,i]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={973:0,881:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var a,i,[n,l,s]=o,c=0;if(n.some((t=>0!==e[t]))){for(a in l)r.o(l,a)&&(r.m[a]=l[a]);if(s)var d=s(r)}for(t&&t(o);c<n.length;c++)i=n[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},o=globalThis.webpackChunkmagic_text_block=globalThis.webpackChunkmagic_text_block||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var a=r.O(void 0,[881],(()=>r(874)));a=r.O(a)})();